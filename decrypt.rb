# encoding: utf-8

CHAR_MAP = { 0x00 => " ", 0x1B => "é",
 0xBB => "A", 0xD5 => "a", 0xA1 => "0",
 0xBC => "B", 0xD6 => "b", 0xA2 => "1",
 0xBD => "C", 0xD7 => "c", 0xA3 => "2",
 0xBE => "D", 0xD8 => "d", 0xA4 => "3",
 0xBF => "E", 0xD9 => "e", 0xA5 => "4",
 0xC0 => "F", 0xDA => "f", 0xA6 => "5",
 0xC1 => "G", 0xDB => "g", 0xA7 => "6",
 0xC2 => "H", 0xDC => "h", 0xA8 => "7",
 0xC3 => "I", 0xDD => "i", 0xA9 => "8",
 0xC4 => "J", 0xDE => "j", 0xAA => "9",
 0xC5 => "K", 0xDF => "k", 0xAB => "!",
 0xC6 => "L", 0xE0 => "l", 0xAC => "?",
 0xC7 => "M", 0xE1 => "m", 0xAD => ".",
 0xC8 => "N", 0xE2 => "n", 0xAE => "-",
 0xC9 => "O", 0xE3 => "o", 0xAF => "·",
 0xCA => "P", 0xE4 => "p", 0xB0 => "…",
 0xCB => "Q", 0xE5 => "q", 0xB1 => "“",
 0xCC => "R", 0xE6 => "r", 0xB2 => "”",
 0xCD => "S", 0xE7 => "s", 0xB3 => "‘",
 0xCE => "T", 0xE8 => "t", 0xB4 => "’",
 0xCF => "U", 0xE9 => "u", 0xB5 => "♂",
 0xD0 => "V", 0xEA => "v", 0xB6 => "♀",
 0xD1 => "W", 0xEB => "w", 0xB7 => "$",
 0xD2 => "X", 0xEC => "x", 0xB8 => ",",
 0xD3 => "Y", 0xED => "y", 0xB9 => "×",
 0xD4 => "Z", 0xEE => "z", 0xBA => "/" }

def decodeString(bytes)
 str = ""
 bytes.each_char {|c|
  return str if c == 0xFF
  str += CHAR_MAP[c]
 }
end

map = []

for i in 0...256
 c = CHAR_MAP[i]
 if (!c)
  map[i] = sprintf('\u%X', "".ord)
 else
  if c.ord < 128
   map[i] = c
  else
   map[i] = sprintf('\u%x', c.ord)
  end
 end
end

File.open("charmap.txt", "w") {|f| f.write(map.inspect) }